# <center> 代码规范简要介绍(2021.11.29)</center>    

## <p align="right" >——如何写出祖传代码</p>
参考自：[如何写出优雅的代码？](https://www.zhihu.com/question/28492982/answer/1578001717)与[C++代码规范（必须要遵循以及举例）](https://blog.csdn.net/winafa/article/details/115693392)  
“衡量代码质量的唯一标准是阅读该代码时说脏话的次数（WTF/MIN）”。  
这句话来自 ROBERT C. MARTIN（《代码整洁之道》的作者，但很不幸这本书我并没有读过）。  
如图：   
<div align=center> <img src=./picture/goodcode.jpg/></div>  

我们编写的代码，除了用于机器执行产生我们预期的效果以外，更多的时候是给人读的，这个读代码的可能是后来的维护人员，更多时候是一段时间后的作者本人。  
今天，我们就来聊一聊，什么代码是好代码，怎样写出好代码。  
>任何一个傻瓜都能写出计算机可以理解的代码。唯有写出人类容易理解的代码，才是优秀的程序员。—— Martin Fowler（《重构——改善既有代码的设计》的作者，但显然这本书我也没看过）
## 好代码的特性 
**高内聚、低耦合**  
这两个特性很重要，但目前大家没啥必要了解，下一次见到的时候记得去查下资料就好。  
**可读性**  
好的代码读起来应该是很简单的，我们可以从以下几个方面考虑：
1. 命名  
    - 名副其实  
     好的名称一定是名副其实的，不需要注释解释即可明白其含义的。比如以下两个变量命名方式：
        ```C
        /**
         * 创建后的天数
        **/
        int d;
        ```
        ```C
        int daysSinceCreation;
        ```
        后者比前者的命名要好很多，阅读者一下子就明白了变量的意思。
    - 容易区分  
     我们很容易就会写下非常相近的函数名，仅从名称无法区分两者到底有啥区别（eg. getAccount()与getAccountInfo()），这样在调用时也很难抉择要用哪个，需要去看实现的代码才能确定，所以在定义的时候最好就区分开来。
    - 易读的  
     名称一定是可读的，易读的，最好不要用自创的缩写，或者中英文混写。
    - 足够短
     名称当然不是越长越好，应该在足够表达其含义的情况下越短越好。
    - 命名方法  
     建议使用[下划线命名法](https://www.cnblogs.com/linuxAndMcu/p/11280748.html)或[驼峰命名法](https://www.cnblogs.com/linuxAndMcu/p/11280748.html)
2. 格式  
   良好的代码格式也是提高可读性非常重要的一环，这里没有必要详细讲，但是请大家记住，不同层次的代码之间**一定要有缩进**。
3. 注释/文档  
   目前的阶段大家没有必要额外写一份伴随代码的文档，但我们希望大家能够写好注释。  
   版权和版本的声明位于头文件和源文件的开头（参见示例），主要内容有：  
   - 版权信息
   - 文件名称，摘要
   - 当前版本号，作者，日期  

   （才不是方便甩锅）  
   比如：
   ```C
   /**
    *****************************************************************************
    *  Copyright (C), 2010-2019, GOSUN CL
    *
    *  @file    文件名(包含后缀名)
    *  @brief   简要描述本文件的内容
    *
    *  @author  作者
    *  @email   邮箱
    *  @date    输入日期
    *  @version 版本号
    *
    *  （若本次是第一个定型版本，可以省略下列Note内容）
    *
    *----------------------------------------------------------------------------
    *  @note 历史版本  修改人员    修改日期    修改内容
    *  @note
    *
    *****************************************************************************
    */
    
    
    ///以下是例子，供参考///
    
    /**
    *****************************************************************************
    *  Copyright (C), 2010-2019, GOSUN CL
    *
    *  @file    CLUtility.h
    *  @brief   各种通用小功能/通用文件操作
    *           1. 小功能：新增 正则匹配/查找下一个字符/文件夹（全部）创建
    *           2. 重新封装: CECDateTime/CECString/CECFile/CECLogFile/
    *           3. 新增功能模块：CECRunLog(运行日志)/CECReadIni(ini文件读取)
    *
    *  @author  gu
    *  @email   gu.qing@qq.com
    *  @date    2019-07-18
    *  @version V1.1.0 20190718
    *----------------------------------------------------------------------------
    *  @note 历史版本  修改人员    修改日期    修改内容
    *  @note v1.0      gu          2018-2-15   1.创建
    *
    *****************************************************************************
    */
   ```
   每个函数都应该在函数上方进行注释，注释内容要与实际内容含义保持一致。如果函数功能或输入参数等信息发生变化，需要及时修改注释信息。  
   比如：
   ```C
   /**
    *****************************************************************************
    *  @brief   描述该函数主要功能
    *
    *  @param[in]     参数名（与函数里的参数一致）  参数的描述    in：表示输入类型
    *  @param[out]    参数名（与函数里的参数一致）  参数的描述    out：表示输出类型
    *  @param[in,out] 参数名（与函数里的参数一致）  参数的描述    in,out：表示既是输入又是输出
    *
    *  @return  返回值的说明
    *  @author  （若与文件申明作者是不一样的，需要填写；否则，可以省略此项）  
    *  @email   邮箱
    *
    *  （若本次是第一个定型版本，可以省略下列Note内容）
    *----------------------------------------------------------------------------
    *  @note 历史版本  修改人员    修改日期    修改内容
    *  @note v1.0      gu          2019-5-15   1.创建
    *
    *****************************************************************************
    */
    
    
    ///以下是例子，供参考///
    /**
    *****************************************************************************
    *  @brief   对外接口，用于new创建对象（实例CRunLog）
    *
    *  @param[in]    strPath    存放路径（完整）
    *  @param[in]    nMaxDay    最多存放多少天
    *  @param[in]    nLenDay    每天多少长度（字节）
    *
    *  @return  CRunLog的实例，指针   
    *----------------------------------------------------------------------------
    *  @note 历史版本  修改人员    修改日期    修改内容
    *  @note v1.0      gu          2019-5-15   1.创建
    *
    *****************************************************************************
    */
   ```
## 结语
代码规范最重要的意义在于可维护性，谁也不能保证当一个月后再回来看当初的代码仍然能够想起来自己为什么写的如此奇怪。  
<div align=center> <img src=./picture/unknown_code.jpg /></div>  

所以我们就要在一开始写的时候就尽量写的直白而易懂。    
我希望大家在70岁的时候，不会一边打着求生之路三一边被孙子拉着解释自己五十年前写的代码。
